@using Microsoft.AspNetCore.Authentication;
<!-- SmartAdmin Template -->
<script src="~/SmartAdmin/dist/js/vendors.bundle.js"></script>
<script src="~/SmartAdmin/dist/js/app.bundle.js?v=20220519"></script>

<!-- Forms -->
<script src="~/SmartAdmin/dist/js/jquery.inputmask.bundle.js"></script>
<script src="~/SmartAdmin/dist/lib/iconpicker/js/bootstrap-iconpicker.bundle.min.js"></script>
<script src="~/SmartAdmin/dist/js/select2-4.0.0-js-select2.min.js"></script>
<script src="~/SmartAdmin/dist/js/dependency/moment/moment.js"></script>
<script src="~/SmartAdmin/dist/js/formplugins/bootstrap-datepicker/bootstrap-datepicker.js"></script>
<script src="~/SmartAdmin/dist/js/formplugins/bootstrap-daterangepicker/bootstrap-daterangepicker.js"></script>

<script src="~/lib/flat-picker/flatpickr.min.js"></script>
<script src="~/lib/flat-picker/flatpickrlang.js"></script>
<script src="~/lib/tooltip/tooltipster.bundle.min.js"></script>

<script src="~/SmartAdmin/dist/js/formplugins/dropzone/dropzone.js"></script>
<script src="~/SmartAdmin/dist/js/formplugins/summernote/summernote.js"></script>

<!-- Dashboard -->
<script src="~/lib/gauge/gauge.js"></script>
<script src="~/SmartAdmin/dist/js/statistics/flot/flot.bundle.js"></script>
<script src="~/lib/jstree/dist/jstree.min.js"></script>
<script src="~/SmartAdmin/dist/js/statistics/chartjs/chartjs.bundle.js"></script>


<script src="~/lib/jquery-steps-master/lib/jquery.cookie-1.3.1.js"></script>
<script src="~/lib/jquery-steps-master/build/jquery.steps.js"></script>

<!-- Leaflet -->
<script src="~/lib/leaflet/js/leaflet.js"></script>
<script src="~/lib/leaflet/js/markercluster.js"></script>
<script src="~/lib/leaflet/js/leaflet-beautify-marker-icon.js"></script>

<script src="~/lib/sweetalerts/sweetalert2.min.js"></script>
<script src="~/SmartAdmin/dist/js/notifications/toastr/toastr.js"></script>
<script src="~/SmartAdmin/dist/js/datagrid/datatables/datatables.bundle.js"></script>
<script src="~/SmartAdmin/dist/js/datagrid/datatables/datatables.export.js"></script>
<script src="~/SmartAdmin/dist/js/miscellaneous/jqvmap/jqvmap.bundle.js"></script>

<script src="~/lib/jquery.peity.min.js"></script>
<script src="~/lib/clock/bootstrap-clockpicker.min.js"></script>
<script src="~/lib/rehber/bootstrap-autocomplete/autocomplete.js"></script>
<script src="~/lib/combotree/comboTreePlugin.js"></script>
<script src="~/lib/buttonloader/jquery.buttonLoader.js"></script>
<script src="https://cdn.datatables.net/fixedcolumns/4.0.1/js/dataTables.fixedColumns.min.js"></script>
<script src="~/SmartAdmin/dist/js/statistics/flot/flot.bundle.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AdrianVillamayor/Wizard-JS@1.9.3/src/wizard.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/smartwizard@6/dist/js/jquery.smartWizard.min.js" type="text/javascript"></script>
<script src="~/lib/maps/highmaps.js"></script>
<script src="~/lib/maps/exporting.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js" integrity="sha512-a+SUDuwNzXDvz4XrIcXHuCf089/iJAoN4lmrXJg18XnduKK6YlDHNRalv4yd1N40OKI80tFidF+rqTFKGPoWFQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- IsTech -->
<script src="~/app/js/i-plugin.js?v=@DateTime.Now.ToBinary()"></script>
<script src="~/app/js/app-globals.js?v=@DateTime.Now.ToBinary()"></script>
<script src="~/app/js/script-init.js?v=@DateTime.Now.ToBinary()"></script>
<script src="~/app/js/i-tech.js?v=@DateTime.Now.ToBinary()"></script>
<script src="~/app/survey/element.js?v=@DateTime.Now.ToBinary()"></script>
<script src="~/app/survey/survey.js?v=@DateTime.Now.ToBinary()"></script>
<!-- Unused -->
<script src="~/lib/jquery-match-height/jquery.matchHeight.js"></script>
<script src="~/lib/payment/imask.min.js"></script>

<script type="text/javascript">
    @{
        var token = "";
        @if (User.Identity.IsAuthenticated)
        {
            token = User.Claims.First(t => t.Type == "Token").Value;
        }
    }
        getToken = () => '@token';

    @{
        var expireTime = User?.Claims.FirstOrDefault(t => t.Type == "ExpiresAt").Value;
        //var isExpired = nw > exp;
        var expTotalSeconds = (DateTime.Parse(expireTime) - DateTime.Now).TotalSeconds;
    }

        iTech.User.CheckLogin();

    var secretKey = '@Context.Items["SecretKey"]';

</script>